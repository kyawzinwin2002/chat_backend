Send Code Service

1. Code Creation;
2. Send Email,

class CreateCode
{
    public static function create($receiver,$type)
    {
        $code = 111111;
        Code::create([
            "code" => code;
            "receiver" => receiver;
            "code_type" => $type;
        ])

        return $code;
    }
}

class SendEmailService
{
    public static function send($receiver,$email)
    {
        Mail::to($receiver->email)->send($email);
    }
}


interface SendCodeService
{
    public static function send($receiver,$codeType);
}

trait SendVerificationCode
{
    public static function send($receiver,$codeType)
    {
        $code = CreateCode::create($receiver,$codeType);

        $email = static::getEmailInstance($receiver,$code);

        SendEmailService::send($receiver,$email);
    }

    abstract protected static function getEmailInstance($receiver, $code);

}

class SendRegisterCode implements SendCodeService
{
    use SendVerificationCode;

    protected static function getEmailInstance($receiver, $code)
    {
        return new RegisterVerificationEmail($receiver, $code);
    }
}

class SendEmailVerifyCode implements SendCodeService
{
    use SendVerificationCode;

    protected static function getEmailInstance($receiver, $code)
    {
        return new EmailVerifyEmail($receiver, $code);
    }
}

SendRegisterCode::send($receiver,CodeType::Register);
SendEmailVerifyCode::send($receiver,CodeType::EmailVerify)








